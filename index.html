<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SocialSim Pro | Printeknologies</title>
    
    <!-- Favicon -->
    <link rel="icon" href="https://i.postimg.cc/8kXD1V5K/logo-printeknologies.png" type="image/png">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- html2canvas -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Inter:wght@300;400;600;700&family=Segoe+UI+Emoji&display=swap" rel="stylesheet">

    <style>
        /* Base Fonts */
        body { font-family: 'Inter', sans-serif; }
        .font-insta { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }
        .font-fb { font-family: Helvetica, Arial, sans-serif; }
        .font-x { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }
        .font-tiktok { font-family: 'Proxima Nova', sans-serif; }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(148, 163, 184, 0.5); border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(148, 163, 184, 0.8); }

        /* Background Animated "Wow" Effect */
        .bg-animated {
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
        }
        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        /* Glassmorphism Panel */
        .glass-panel {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        /* Footer Wow Effect */
        .footer-wow {
            background: linear-gradient(270deg, #0f172a, #1e293b, #334155, #0f172a);
            background-size: 800% 800%;
            animation: gradientAnimation 10s ease infinite;
            position: relative;
            overflow: hidden;
        }
        .footer-glow {
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(99, 102, 241, 0.15) 0%, rgba(0,0,0,0) 70%);
            animation: rotateGlow 15s linear infinite;
            pointer-events: none;
        }
        @keyframes gradientAnimation {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        @keyframes rotateGlow {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Preview Shadows & Styles */
        .preview-shadow { box-shadow: 0 20px 50px -12px rgba(0,0,0,0.25); }
        
        .watermark-overlay {
            position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background-image: url('https://i.postimg.cc/8kXD1V5K/logo-printeknologies.png');
            background-size: 150px; background-repeat: repeat;
            opacity: 0.03; transform: rotate(-15deg); pointer-events: none;
            display: none; z-index: 50;
        }

        .file-upload-label { cursor: pointer; transition: all 0.3s; }
        .file-upload-label:hover { background-color: #f0f9ff; border-color: #3b82f6; }
        
        .tiktok-overlay { background: linear-gradient(to top, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0) 40%); }

        /* Carousel Styles Correction */
        .carousel-container { position: relative; overflow: hidden; width: 100%; height: 100%; }
        
        /* Flex track with transition */
        .carousel-track { display: flex; transition: transform 0.3s ease-in-out; height: 100%; }
        
        /* Slide styling - width is handled by JS inline styles for precision */
        .carousel-slide { 
            height: 100%; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            background: #f3f4f6; 
            position: relative; 
            overflow: hidden;
            flex-shrink: 0; /* Prevent shrinking */
        }
        
        .carousel-slide img { width: 100%; height: 100%; object-fit: cover; }
        
        .carousel-nav-btn {
            position: absolute; top: 50%; transform: translateY(-50%);
            background: rgba(0,0,0,0.6); color: white; border-radius: 50%;
            width: 28px; height: 28px; display: flex; align-items: center; justify-content: center;
            font-size: 14px; cursor: pointer; z-index: 20; opacity: 0; transition: all 0.2s;
            backdrop-filter: blur(2px);
        }
        .carousel-container:hover .carousel-nav-btn { opacity: 1; }
        .nav-prev { left: 10px; }
        .nav-next { right: 10px; }
        
        .carousel-dots {
            position: absolute; bottom: 12px; left: 0; right: 0;
            display: flex; justify-content: center; gap: 5px; z-index: 20;
            pointer-events: none;
        }
        .dot { width: 6px; height: 6px; background: rgba(255,255,255,0.4); border-radius: 50%; transition: all 0.2s; box-shadow: 0 1px 2px rgba(0,0,0,0.3); }
        .dot.active { background: #ffffff; transform: scale(1.2); opacity: 1; }
        .dot-insta.active { background: #3b82f6; }
    </style>
</head>
<body class="bg-animated text-slate-800 min-h-screen flex flex-col">

    <!-- Navbar -->
    <nav class="glass-panel border-b border-white/40 px-6 py-4 flex justify-between items-center sticky top-0 z-40 shadow-sm">
        <div class="flex items-center gap-3">
            <img src="https://i.postimg.cc/8kXD1V5K/logo-printeknologies.png" alt="Printeknologies" class="h-10 w-auto">
            <span class="font-bold text-xl tracking-tight text-slate-800 hidden md:block">Social<span class="text-blue-600">Sim</span></span>
        </div>
        <div class="flex gap-2 sm:gap-4 text-sm font-medium overflow-x-auto pb-1 sm:pb-0">
            <button onclick="setPlatform('instagram')" class="platform-btn px-4 py-2 rounded-full bg-white/50 hover:bg-pink-100 hover:text-pink-600 transition-colors whitespace-nowrap active-platform" data-platform="instagram"><i class="fab fa-instagram mr-2"></i>Insta</button>
            <button onclick="setPlatform('linkedin')" class="platform-btn px-4 py-2 rounded-full bg-white/50 hover:bg-blue-100 hover:text-blue-700 transition-colors whitespace-nowrap" data-platform="linkedin"><i class="fab fa-linkedin mr-2"></i>LinkedIn</button>
            <button onclick="setPlatform('facebook')" class="platform-btn px-4 py-2 rounded-full bg-white/50 hover:bg-blue-100 hover:text-blue-600 transition-colors whitespace-nowrap" data-platform="facebook"><i class="fab fa-facebook mr-2"></i>FB</button>
            <button onclick="setPlatform('x')" class="platform-btn px-4 py-2 rounded-full bg-white/50 hover:bg-gray-200 hover:text-black transition-colors whitespace-nowrap" data-platform="x"><i class="fab fa-x-twitter mr-2"></i>X</button>
            <button onclick="setPlatform('tiktok')" class="platform-btn px-4 py-2 rounded-full bg-white/50 hover:bg-gray-900 hover:text-white transition-colors whitespace-nowrap" data-platform="tiktok"><i class="fab fa-tiktok mr-2"></i>TikTok</button>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="flex-grow container mx-auto px-4 py-8 flex flex-col lg:flex-row gap-8 relative z-10">
        
        <!-- Editor Column (Left) -->
        <div class="w-full lg:w-1/3 space-y-6">
            <div class="glass-panel rounded-2xl shadow-xl p-6">
                <h2 class="text-lg font-bold mb-4 flex items-center gap-2 text-slate-800"><i class="fas fa-sliders-h text-blue-500"></i> Configuration</h2>
                
                <!-- Profile Section -->
                <div class="space-y-4 mb-6">
                    <label class="block text-sm font-medium text-slate-600">Profil</label>
                    <div class="flex gap-4 items-center">
                        <label class="file-upload-label w-16 h-16 rounded-full border-2 border-dashed border-slate-300 flex items-center justify-center text-slate-400 overflow-hidden relative bg-white/50 group">
                            <input type="file" class="hidden" accept="image/*" onchange="handleAvatar(this)">
                            <img id="avatar-preview-input" class="absolute inset-0 w-full h-full object-cover hidden">
                            <i class="fas fa-camera group-hover:text-blue-500 transition"></i>
                        </label>
                        <div class="flex-1 space-y-2">
                            <input type="text" id="input-name" placeholder="Nom d'affichage" class="w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none transition bg-white/80" oninput="updateContent()">
                            <input type="text" id="input-handle" placeholder="@utilisateur" class="w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none transition bg-white/80" oninput="updateContent()">
                        </div>
                    </div>
                </div>

                <!-- Content Section -->
                <div class="space-y-4 mb-6">
                    <label class="block text-sm font-medium text-slate-600">Contenu du Post</label>
                    <textarea id="input-text" rows="3" placeholder="Écrivez votre légende ici..." class="w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:ring-2 focus:ring-blue-500 outline-none transition resize-none bg-white/80" oninput="updateContent()"></textarea>
                    
                    <!-- Multi-Image Upload -->
                    <div class="border-2 border-dashed border-slate-300 rounded-lg p-4 text-center file-upload-label relative bg-white/50 hover:bg-white/80 group">
                        <input type="file" class="hidden" id="post-image-input" accept="image/*" multiple onchange="handlePostImages(this)">
                        <label for="post-image-input" class="cursor-pointer block">
                            <i class="fas fa-images text-2xl text-slate-400 mb-2 group-hover:text-blue-500 transition"></i>
                            <p class="text-xs text-slate-500 font-medium">Ajouter des photos (Multiple)</p>
                            <p class="text-[10px] text-slate-400 mt-1">Cliquez pour parcourir</p>
                        </label>
                    </div>
                    
                    <!-- Image Thumbnails Preview -->
                    <div id="image-thumbnails" class="flex gap-2 overflow-x-auto pb-2 h-16 empty:hidden">
                        <!-- Thumbnails injected by JS -->
                    </div>
                </div>

                <!-- Stats Section -->
                <div class="space-y-4">
                    <label class="block text-sm font-medium text-slate-600">Métriques</label>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <span class="text-xs text-slate-400">J'aime</span>
                            <input type="text" id="input-likes" value="1,245" class="w-full px-3 py-1 border border-slate-200 rounded text-sm bg-white/80" oninput="updateContent()">
                        </div>
                        <div>
                            <span class="text-xs text-slate-400">Coms/Partages</span>
                            <input type="text" id="input-comments" value="48" class="w-full px-3 py-1 border border-slate-200 rounded text-sm bg-white/80" oninput="updateContent()">
                        </div>
                    </div>
                </div>
            </div>

            <button onclick="exportPost()" class="w-full py-4 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl font-bold shadow-lg shadow-blue-500/30 hover:shadow-blue-500/50 transform hover:-translate-y-1 transition-all flex items-center justify-center gap-2 ring-1 ring-white/20">
                <i class="fas fa-download"></i> Exporter le rendu
            </button>
        </div>

        <!-- Preview Column (Right) -->
        <div class="w-full lg:w-2/3 flex items-start justify-center">
            <!-- CAPTURE AREA WRAPPER -->
            <div id="capture-area" class="relative z-10 transition-all duration-500 transform scale-100">
                
                <!-- Watermark Layer (Hidden until export) -->
                <div class="watermark-overlay" id="watermark"></div>

                <!-- INSTAGRAM PREVIEW -->
                <div id="preview-instagram" class="bg-white w-[375px] rounded-xl border border-gray-200 preview-shadow font-insta hidden overflow-hidden">
                    <!-- Header -->
                    <div class="flex items-center justify-between p-3">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 rounded-full overflow-hidden border border-gray-100">
                                <img src="https://via.placeholder.com/150" class="w-full h-full object-cover avatar-target">
                            </div>
                            <div>
                                <p class="text-sm font-semibold text-gray-900 leading-tight name-target">Nom Utilisateur</p>
                                <p class="text-xs text-gray-500 leading-tight">Original Audio</p>
                            </div>
                        </div>
                        <i class="fas fa-ellipsis-h text-gray-600 text-sm"></i>
                    </div>
                    <!-- Image Area (Carousel) -->
                    <div class="w-full bg-gray-100 min-h-[375px] relative media-area-instagram">
                         <!-- Injected by JS -->
                         <img src="https://via.placeholder.com/600x600" class="w-full h-auto object-cover opacity-50">
                    </div>
                    <!-- Actions -->
                    <div class="p-3">
                        <div class="flex justify-between mb-2 text-2xl">
                            <div class="flex gap-4 text-black">
                                <i class="far fa-heart hover:text-gray-500 cursor-pointer"></i>
                                <i class="far fa-comment hover:text-gray-500 cursor-pointer transform -scale-x-100"></i>
                                <i class="far fa-paper-plane hover:text-gray-500 cursor-pointer"></i>
                            </div>
                            <i class="far fa-bookmark text-black hover:text-gray-500 cursor-pointer"></i>
                        </div>
                        <p class="text-sm font-semibold mb-1"><span class="likes-target">1,245</span> J'aime</p>
                        <p class="text-sm text-gray-900">
                            <span class="font-semibold mr-1 handle-target">utilisateur</span>
                            <span class="text-target">Ceci est une description de test. #instagram #simulation</span>
                        </p>
                        <p class="text-xs text-gray-500 mt-1 uppercase">Il y a 2 heures</p>
                    </div>
                </div>

                <!-- LINKEDIN PREVIEW -->
                <div id="preview-linkedin" class="bg-white w-[500px] rounded-lg border border-gray-300 preview-shadow font-insta hidden overflow-hidden">
                     <!-- Header -->
                     <div class="p-4 flex gap-3 mb-1">
                         <img src="https://via.placeholder.com/150" class="w-12 h-12 rounded-full object-cover avatar-target">
                         <div>
                             <p class="text-sm font-semibold text-gray-900 name-target mb-0.5">Nom Utilisateur</p>
                             <p class="text-xs text-gray-500 line-clamp-1 handle-target">Professionnel • @utilisateur</p>
                             <div class="flex items-center gap-1 text-xs text-gray-500">
                                 <span>1 sem • </span>
                                 <i class="fas fa-globe-americas"></i>
                             </div>
                         </div>
                         <i class="fas fa-ellipsis-h ml-auto text-gray-600"></i>
                     </div>
                     <!-- Text -->
                     <div class="px-4 pb-2">
                         <p class="text-sm text-gray-900 whitespace-pre-line text-target">Ceci est une description de test pour LinkedIn.</p>
                     </div>
                     <!-- Image Area -->
                     <div class="w-full bg-gray-100 media-area-linkedin aspect-video">
                         <img src="https://via.placeholder.com/800x600" class="w-full h-full object-cover opacity-50">
                     </div>
                     <!-- Stats Line -->
                     <div class="px-4 py-2 border-b border-gray-100 flex justify-between items-center">
                         <div class="flex items-center gap-1">
                            <div class="flex -space-x-1">
                                <div class="bg-blue-500 rounded-full w-4 h-4 flex items-center justify-center border border-white z-10"><i class="fas fa-thumbs-up text-[8px] text-white"></i></div>
                                <div class="bg-red-500 rounded-full w-4 h-4 flex items-center justify-center border border-white"><i class="fas fa-heart text-[8px] text-white"></i></div>
                            </div>
                            <span class="text-xs text-gray-500 hover:text-blue-600 hover:underline cursor-pointer ml-1 likes-target">1,245</span>
                         </div>
                         <div class="text-xs text-gray-500 hover:text-blue-600 hover:underline cursor-pointer">
                             <span class="comments-target">48</span> commentaires
                         </div>
                     </div>
                     <!-- Actions -->
                     <div class="px-2 py-1 flex justify-between">
                         <button class="flex items-center gap-2 px-3 py-3 rounded hover:bg-gray-100 text-gray-600 font-semibold text-sm transition">
                             <i class="far fa-thumbs-up text-lg"></i> J'aime
                         </button>
                         <button class="flex items-center gap-2 px-3 py-3 rounded hover:bg-gray-100 text-gray-600 font-semibold text-sm transition">
                             <i class="far fa-comment-dots text-lg"></i> Commenter
                         </button>
                         <button class="flex items-center gap-2 px-3 py-3 rounded hover:bg-gray-100 text-gray-600 font-semibold text-sm transition">
                             <i class="fas fa-retweet text-lg"></i> Republier
                         </button>
                         <button class="flex items-center gap-2 px-3 py-3 rounded hover:bg-gray-100 text-gray-600 font-semibold text-sm transition">
                             <i class="fas fa-paper-plane text-lg"></i> Envoyer
                         </button>
                     </div>
                </div>

                <!-- FACEBOOK PREVIEW -->
                <div id="preview-facebook" class="bg-white w-[500px] rounded-lg border border-gray-200 preview-shadow font-fb hidden overflow-hidden">
                    <!-- Header -->
                    <div class="p-3 flex items-center gap-2">
                        <img src="https://via.placeholder.com/150" class="w-10 h-10 rounded-full object-cover avatar-target border border-gray-200">
                        <div>
                            <p class="text-[15px] font-semibold text-[#050505] name-target leading-snug">Nom Utilisateur</p>
                            <div class="flex items-center gap-1 text-xs text-[#65676B]">
                                <span>2 h</span>
                                <span>•</span>
                                <i class="fas fa-globe-americas"></i>
                            </div>
                        </div>
                        <div class="ml-auto flex gap-4 text-[#65676B]">
                            <i class="fas fa-ellipsis-h"></i>
                        </div>
                    </div>
                    <!-- Text -->
                    <div class="px-3 pb-3">
                        <p class="text-[15px] text-[#050505] whitespace-pre-line text-target">Voici un post style Facebook.</p>
                    </div>
                    <!-- Image -->
                    <div class="w-full media-area-facebook aspect-[4/3]">
                         <img src="https://via.placeholder.com/800x600" class="w-full h-full object-cover opacity-50">
                    </div>
                    <!-- Stats -->
                    <div class="px-4 py-2.5 flex justify-between items-center text-[#65676B] text-[15px]">
                        <div class="flex items-center gap-1.5">
                            <div class="bg-blue-500 rounded-full w-[18px] h-[18px] flex items-center justify-center z-10"><i class="fas fa-thumbs-up text-[10px] text-white"></i></div>
                            <span class="likes-target">1,245</span>
                        </div>
                        <div class="flex gap-3">
                            <span><span class="comments-target">48</span> commentaires</span>
                            <span>12 partages</span>
                        </div>
                    </div>
                    <!-- Actions -->
                    <div class="px-3 mx-3 border-t border-b border-[#ced0d4] py-1 flex justify-between">
                         <button class="flex-1 flex items-center justify-center gap-2 py-1.5 hover:bg-gray-100 rounded text-[#65676B] font-medium text-[15px]">
                             <i class="far fa-thumbs-up"></i> J'aime
                         </button>
                         <button class="flex-1 flex items-center justify-center gap-2 py-1.5 hover:bg-gray-100 rounded text-[#65676B] font-medium text-[15px]">
                             <i class="far fa-comment-alt"></i> Commenter
                         </button>
                         <button class="flex-1 flex items-center justify-center gap-2 py-1.5 hover:bg-gray-100 rounded text-[#65676B] font-medium text-[15px]">
                             <i class="fas fa-share"></i> Partager
                         </button>
                    </div>
                </div>

                <!-- X (TWITTER) PREVIEW -->
                <div id="preview-x" class="bg-white w-[500px] rounded-xl border border-gray-100 preview-shadow font-x hidden p-4">
                    <div class="flex gap-3">
                        <img src="https://via.placeholder.com/150" class="w-10 h-10 rounded-full object-cover avatar-target">
                        <div class="flex-1">
                            <div class="flex items-center justify-between">
                                <div class="flex items-center gap-1 text-[15px]">
                                    <span class="font-bold text-gray-900 name-target">Nom Utilisateur</span>
                                    <i class="fas fa-check-circle text-blue-500 text-xs"></i>
                                    <span class="text-gray-500 handle-target">@utilisateur</span>
                                    <span class="text-gray-500">· 2h</span>
                                </div>
                                <i class="fas fa-ellipsis-h text-gray-500 text-sm"></i>
                            </div>
                            <!-- Text -->
                            <div class="mt-1 text-[15px] text-gray-900 whitespace-pre-line text-target mb-3">
                                C'est ce qu'il se passe aujourd'hui sur X.
                            </div>
                            <!-- Image -->
                            <div class="rounded-2xl border border-gray-200 overflow-hidden mb-3 aspect-video media-area-x">
                                <img src="https://via.placeholder.com/800x500" class="w-full h-full object-cover opacity-50">
                            </div>
                            <!-- Metrics -->
                            <div class="flex justify-between text-gray-500 text-[13px] max-w-md">
                                <div class="flex items-center gap-2 hover:text-blue-500 transition group">
                                    <div class="p-2 rounded-full group-hover:bg-blue-50"><i class="far fa-comment"></i></div>
                                    <span class="comments-target">48</span>
                                </div>
                                <div class="flex items-center gap-2 hover:text-green-500 transition group">
                                    <div class="p-2 rounded-full group-hover:bg-green-50"><i class="fas fa-retweet"></i></div>
                                    <span>120</span>
                                </div>
                                <div class="flex items-center gap-2 hover:text-pink-500 transition group">
                                    <div class="p-2 rounded-full group-hover:bg-pink-50"><i class="far fa-heart"></i></div>
                                    <span class="likes-target">1,245</span>
                                </div>
                                <div class="flex items-center gap-2 hover:text-blue-500 transition group">
                                    <div class="p-2 rounded-full group-hover:bg-blue-50"><i class="far fa-chart-bar"></i></div>
                                    <span>24k</span>
                                </div>
                                <div class="flex items-center gap-2">
                                     <div class="p-2 rounded-full hover:bg-blue-50"><i class="fas fa-share-alt"></i></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- TIKTOK PREVIEW -->
                <div id="preview-tiktok" class="bg-black w-[350px] h-[650px] rounded-2xl border-4 border-gray-900 preview-shadow font-tiktok hidden relative overflow-hidden">
                    <!-- Media BG -->
                    <div class="absolute inset-0 media-area-tiktok">
                        <img src="https://via.placeholder.com/400x800" class="w-full h-full object-cover opacity-60">
                    </div>
                    
                    <!-- Top Overlay -->
                    <div class="absolute top-0 w-full p-4 flex justify-between text-white/80 z-20 pt-8">
                        <span class="text-lg mix-blend-difference">Live</span>
                        <div class="flex gap-4 font-semibold text-base mix-blend-difference">
                            <span class="text-white/60">Suivis</span>
                            <span class="text-white border-b-2 border-white pb-1">Pour toi</span>
                        </div>
                        <i class="fas fa-search text-lg mix-blend-difference"></i>
                    </div>

                    <!-- Right Sidebar -->
                    <div class="absolute right-2 bottom-20 flex flex-col items-center gap-5 z-20 text-white">
                        <div class="relative mb-2">
                            <img src="https://via.placeholder.com/150" class="w-11 h-11 rounded-full border border-white avatar-target object-cover">
                            <div class="absolute -bottom-2 left-1/2 transform -translate-x-1/2 bg-pink-500 rounded-full w-5 h-5 flex items-center justify-center text-[10px]"><i class="fas fa-plus"></i></div>
                        </div>
                        
                        <div class="flex flex-col items-center gap-1">
                            <i class="fas fa-heart text-3xl drop-shadow-lg"></i>
                            <span class="text-xs font-semibold drop-shadow-md likes-target">1.2k</span>
                        </div>
                         <div class="flex flex-col items-center gap-1">
                            <i class="fas fa-comment-dots text-3xl drop-shadow-lg"></i>
                            <span class="text-xs font-semibold drop-shadow-md comments-target">48</span>
                        </div>
                         <div class="flex flex-col items-center gap-1">
                            <i class="fas fa-bookmark text-3xl drop-shadow-lg"></i>
                            <span class="text-xs font-semibold drop-shadow-md">204</span>
                        </div>
                         <div class="flex flex-col items-center gap-1">
                            <i class="fas fa-share text-3xl drop-shadow-lg"></i>
                            <span class="text-xs font-semibold drop-shadow-md">Share</span>
                        </div>
                         <div class="animate-[spin_4s_linear_infinite] bg-gray-800 rounded-full p-2 border-4 border-gray-700 mt-2">
                            <img src="https://i.postimg.cc/8kXD1V5K/logo-printeknologies.png" class="w-6 h-6 rounded-full">
                        </div>
                    </div>

                    <!-- Bottom Overlay (Description) -->
                    <div class="absolute bottom-0 w-full p-4 pb-6 tiktok-overlay z-10 text-white">
                        <div class="mb-3 max-w-[80%]">
                            <h3 class="font-bold text-base shadow-black drop-shadow-md mb-1 handle-target">@utilisateur</h3>
                            <p class="text-sm shadow-black drop-shadow-md text-target leading-snug">Description TikTok ici... #foryou #fyp #viral</p>
                        </div>
                        <div class="flex items-center gap-2">
                            <i class="fas fa-music text-xs"></i>
                            <span class="text-xs sliding-text">Son original - Printeknologies • </span>
                        </div>
                    </div>
                </div>

            </div>
            <!-- End Capture Area -->
        </div>
    </main>

    <!-- Footer Wow -->
    <footer class="footer-wow text-white py-12 mt-auto border-t border-white/10">
        <div class="footer-glow"></div>
        <div class="container mx-auto px-4 relative z-10">
            <div class="flex flex-col md:flex-row justify-between items-center gap-8">
                <div class="flex items-center gap-4">
                    <div class="bg-white/10 backdrop-blur-md p-3 rounded-2xl border border-white/20 shadow-2xl">
                        <img src="https://i.postimg.cc/8kXD1V5K/logo-printeknologies.png" alt="Logo" class="h-12 w-auto">
                    </div>
                    <div>
                        <h3 class="text-2xl font-bold tracking-tight">Printeknologies</h3>
                        <p class="text-indigo-200 text-sm">L'innovation au service de l'impression.</p>
                    </div>
                </div>
                
                <div class="flex gap-6">
                    <a href="#" class="w-10 h-10 rounded-full bg-white/5 hover:bg-white/20 flex items-center justify-center transition backdrop-blur-sm border border-white/10 group">
                        <i class="fab fa-linkedin-in group-hover:scale-110 transition"></i>
                    </a>
                    <a href="#" class="w-10 h-10 rounded-full bg-white/5 hover:bg-white/20 flex items-center justify-center transition backdrop-blur-sm border border-white/10 group">
                        <i class="fab fa-instagram group-hover:scale-110 transition"></i>
                    </a>
                    <a href="#" class="w-10 h-10 rounded-full bg-white/5 hover:bg-white/20 flex items-center justify-center transition backdrop-blur-sm border border-white/10 group">
                        <i class="fas fa-globe group-hover:scale-110 transition"></i>
                    </a>
                </div>
            </div>
            
            <div class="mt-12 pt-8 border-t border-white/10 flex flex-col md:flex-row justify-between items-center text-sm text-slate-400">
                <p>&copy; 2024 Printeknologies. Tous droits réservés.</p>
                <p class="flex items-center gap-2"><i class="fas fa-code"></i> Développé avec excellence.</p>
            </div>
        </div>
    </footer>

    <!-- Logic Script -->
    <script>
        // Init state
        let currentPlatform = 'instagram';
        let postImages = ["https://via.placeholder.com/800x800"]; // Default placeholder
        let currentImageIndices = { instagram: 0, linkedin: 0, facebook: 0, x: 0, tiktok: 0 };
        
        // DOM Elements
        const inputs = {
            name: document.getElementById('input-name'),
            handle: document.getElementById('input-handle'),
            text: document.getElementById('input-text'),
            likes: document.getElementById('input-likes'),
            comments: document.getElementById('input-comments')
        };

        const defaultData = {
            name: "Votre Nom",
            handle: "@votre_pseudo",
            text: "Ceci est une description de test. Modifiez-la dans le panneau de gauche ! \n\n#printeknologies #socialsim",
            likes: "1,245",
            comments: "42"
        };

        // Initialize
        window.onload = () => {
            setPlatform('instagram');
            inputs.name.value = defaultData.name;
            inputs.handle.value = defaultData.handle;
            inputs.text.value = defaultData.text;
            updateContent();
            renderAllCarousels();
        };

        // Platform Switcher
        function setPlatform(platform) {
            currentPlatform = platform;
            
            // UI Buttons
            document.querySelectorAll('.platform-btn').forEach(btn => {
                if(btn.dataset.platform === platform) {
                    btn.classList.add('bg-blue-100', 'text-blue-700', 'border-blue-200');
                    btn.classList.remove('bg-white/50');
                } else {
                    btn.classList.remove('bg-blue-100', 'text-blue-700', 'border-blue-200');
                    btn.classList.add('bg-white/50');
                }
            });

            // Hide/Show Previews
            ['instagram', 'linkedin', 'facebook', 'x', 'tiktok'].forEach(p => {
                document.getElementById(`preview-${p}`).classList.add('hidden');
            });
            document.getElementById(`preview-${platform}`).classList.remove('hidden');
            
            // Adjust input placeholders
            inputs.text.placeholder = platform === 'tiktok' ? "Description courte TikTok..." : "Écrivez votre légende ici...";
        }

        // Content Update Logic
        function updateContent() {
            const textVal = inputs.text.value || defaultData.text;
            document.querySelectorAll('.text-target').forEach(el => el.innerText = textVal);

            const nameVal = inputs.name.value || defaultData.name;
            document.querySelectorAll('.name-target').forEach(el => el.innerText = nameVal);

            let handleVal = inputs.handle.value || defaultData.handle;
            if(!handleVal.startsWith('@') && currentPlatform !== 'facebook') handleVal = '@' + handleVal;
            document.querySelectorAll('.handle-target').forEach(el => el.innerText = handleVal);

            document.querySelectorAll('.likes-target').forEach(el => el.innerText = inputs.likes.value || "0");
            document.querySelectorAll('.comments-target').forEach(el => el.innerText = inputs.comments.value || "0");
        }

        // Avatar Handling
        function handleAvatar(input) {
            if (input.files && input.files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const preview = document.getElementById('avatar-preview-input');
                    preview.src = e.target.result;
                    preview.classList.remove('hidden');
                    input.parentElement.classList.add('border-blue-500');
                    document.querySelectorAll('.avatar-target').forEach(img => img.src = e.target.result);
                }
                reader.readAsDataURL(input.files[0]);
            }
        }

        // Multi-Image Handling
        function handlePostImages(input) {
            if (input.files && input.files.length > 0) {
                const promises = Array.from(input.files).map(file => {
                    return new Promise((resolve) => {
                        const reader = new FileReader();
                        reader.onload = (e) => resolve(e.target.result);
                        reader.readAsDataURL(file);
                    });
                });

                Promise.all(promises).then(images => {
                    postImages = images;
                    // Reset indices for all platforms
                    Object.keys(currentImageIndices).forEach(k => currentImageIndices[k] = 0);
                    
                    // Render Thumbnails
                    const thumbContainer = document.getElementById('image-thumbnails');
                    thumbContainer.innerHTML = '';
                    images.forEach(imgSrc => {
                        const img = document.createElement('img');
                        img.src = imgSrc;
                        img.className = "h-12 w-12 rounded object-cover border border-slate-200 cursor-pointer hover:opacity-80 transition";
                        // Optional: Add click to preview specific image (future enhancement)
                        thumbContainer.appendChild(img);
                    });

                    renderAllCarousels();
                });
            }
        }

        // Render Carousels for all platforms
        function renderAllCarousels() {
            ['instagram', 'linkedin', 'facebook', 'x', 'tiktok'].forEach(platform => {
                const container = document.querySelector(`.media-area-${platform}`);
                if(!container) return;

                const count = postImages.length;
                const widthPerSlide = 100 / count; // Calculate explicit width percentage per slide
                
                // Build Carousel HTML
                const slidesHtml = postImages.map((src, index) => `
                    <div class="carousel-slide" style="width: ${widthPerSlide}%">
                        <img src="${src}" class="w-full h-full object-cover">
                    </div>
                `).join('');

                const hasMultiple = count > 1;
                const dotsHtml = hasMultiple ? `
                    <div class="carousel-dots">
                        ${postImages.map((_, i) => `<div class="dot ${platform === 'instagram' ? 'dot-insta' : ''} ${i === 0 ? 'active' : ''}" id="dot-${platform}-${i}"></div>`).join('')}
                    </div>
                ` : '';

                const navHtml = hasMultiple ? `
                    <div class="carousel-nav-btn nav-prev" onclick="moveCarousel('${platform}', -1)"><i class="fas fa-chevron-left"></i></div>
                    <div class="carousel-nav-btn nav-next" onclick="moveCarousel('${platform}', 1)"><i class="fas fa-chevron-right"></i></div>
                ` : '';

                // We set the Track width to accomodate all slides side-by-side
                container.innerHTML = `
                    <div class="carousel-container">
                        <div class="carousel-track" id="track-${platform}" style="width: ${count * 100}%">
                            ${slidesHtml}
                        </div>
                        ${dotsHtml}
                        ${navHtml}
                    </div>
                `;
            });
        }

        // Move Carousel Logic
        window.moveCarousel = function(platform, direction) {
            const track = document.getElementById(`track-${platform}`);
            if(!track) return;

            const total = postImages.length;
            let current = currentImageIndices[platform];
            
            current += direction;
            
            // Clamp to bounds
            if (current < 0) current = 0;
            if (current >= total) current = total - 1;
            
            currentImageIndices[platform] = current;
            
            // Move Track
            // Width of one slide relative to the track is (100 / total)%
            const translateVal = -(current * (100 / total));
            track.style.transform = `translateX(${translateVal}%)`;

            // Update Dots
            const dotActiveColor = platform === 'instagram' ? '#3b82f6' : '#ffffff';
            const dotInactiveColor = 'rgba(255,255,255,0.4)';
            
            // We use simple class toggling, relying on CSS for color
            // But CSS specific classes need to be managed carefully
            // The simplest is to just toggle 'active' class
            
            const container = document.querySelector(`.media-area-${platform}`);
            const dots = container.querySelectorAll('.dot');
            dots.forEach((dot, idx) => {
                if(idx === current) dot.classList.add('active');
                else dot.classList.remove('active');
            });
        };

        // Export Function
        function exportPost() {
            const captureArea = document.getElementById(`preview-${currentPlatform}`);
            const watermark = document.getElementById('watermark');
            
            watermark.style.display = 'block';
            
            html2canvas(captureArea, {
                scale: 2,
                useCORS: true,
                backgroundColor: currentPlatform === 'tiktok' ? null : '#ffffff',
                onclone: (clonedDoc) => {
                    const clonedPreview = clonedDoc.getElementById(`preview-${currentPlatform}`);
                    clonedPreview.style.position = "relative";
                    clonedPreview.style.overflow = "hidden";
                    
                    const wmOverlay = clonedDoc.createElement('div');
                    wmOverlay.style.cssText = `
                        position: absolute; top: 0; left: 0; right: 0; bottom: 0;
                        background-image: url('https://i.postimg.cc/8kXD1V5K/logo-printeknologies.png');
                        background-size: 100px; opacity: 0.05; transform: rotate(-10deg);
                        pointer-events: none; z-index: 50;
                    `;
                    clonedPreview.appendChild(wmOverlay);
                }
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = `SocialSim_${currentPlatform}_${Date.now()}.png`;
                link.href = canvas.toDataURL('image/png');
                link.click();
                watermark.style.display = 'none';
            }).catch(err => {
                console.error("Export failed", err);
                alert("Erreur lors de l'exportation.");
                watermark.style.display = 'none';
            });
        }
    </script>
</body>
</html>
